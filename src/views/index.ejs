<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />

    <title><%- appTitle %></title>

    <link rel="icon" type="image/png" href="<%- favicon %>" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1,  minimum-scale=1" />

    <meta property="og:title" content="<%- appTitle %>" />
    <meta property="og:description" content="Search the world's research collections and more for digital books you can use right now." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="" />
    <meta property="og:site_name" content="<%- appTitle %>" />
    <meta property="og:url" content="http://www.nypl.org/" />
    <meta name="twitter:title" content="<%- appTitle %>" />
    <meta name="twitter:description" content="" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@nypl" />
    <meta name="twitter:creator" content="@nypl" />
    <meta name="twitter:image" content="" />

    <% if (isProduction) { %>
    <!-- Minified Styles -->
    <link rel="stylesheet" type="text/css" href="/styles.css" />
    <% } %>

    <script>
      (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        (i[r] =
          i[r] ||
          function() {
            (i[r].q = i[r].q || []).push(arguments);
          }),
          (i[r].l = 1 * new Date());
        (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
      })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

      ga('create', '<%- gaCode %>', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
  <div id="Header-Placeholder">
        <style>
            #Header-Placeholder {
                min-height: 70px;
            }
            @media screen and (min-width: 1024px) {
                #Header-Placeholder {
                    min-height: 208px; // Updated to reflect actual height of header, SFR-771
                }
            }
        </style>
        <script type="text/javascript" src="https://header.nypl.org/dgx-header.min.js?skipNav=mainContent&urls=absolute" async></script>
    </div>
    <div id="app"><%- application %></div>

    <script>
      // WARNING: See the following for security issues around embedding JSON in HTML:
      // http://redux.js.org/recipes/ServerRendering.html#security-considerations
      window.__PRELOADED_STATE__ = <%- appData %>;
    </script>

    <% if (isProduction) { %>
    <script async src="/bundle.js"></script>
    <% } else { %>
    <script src="http://localhost:3000/bundle.js"></script>
    <% } %>
  </body>
</html>
